<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>YouTube Authentication</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="module">
        import YouTubeAuth from './../src/YouTubeAuth.js';

        // Create auth object with OAuth client id
        const auth = new YouTubeAuth({
            client_id: 'YOUR_CLIENT_ID',
            state: 'client_app_state'
        });

        // Fetch access token
        auth.fetchAccessTokenWithCallbackUrl(window.location.href).then(token => {
            // Send token to the parent window
            const event = new CustomEvent('auth-success', { detail: { token } });
            window.opener.dispatchEvent(event);

            // Close the window
            window.close();
        }).catch( error => {
            const event = new CustomEvent('auth-fail', { detail: { error } });
            window.opener.dispatchEvent(event);
            window.close();
        });
    </script>
</head>
<body>
</body>
</html>
